(this["webpackJsonpweb-ui"]=this["webpackJsonpweb-ui"]||[]).push([[0],{161:function(e,t,n){e.exports=n(246)},167:function(e,t,n){},236:function(e,t,n){},245:function(e,t,n){var a={"./amplify-amazon-button_5.entry.js":[252,7],"./amplify-auth-fields_9.entry.js":[253,8],"./amplify-authenticator.entry.js":[254,9],"./amplify-button_3.entry.js":[255,10],"./amplify-checkbox.entry.js":[256,11],"./amplify-confirm-sign-in_8.entry.js":[257,12],"./amplify-container.entry.js":[258,13],"./amplify-federated-buttons_2.entry.js":[259,14],"./amplify-federated-sign-in.entry.js":[260,15],"./amplify-form-field_4.entry.js":[261,16],"./amplify-greetings.entry.js":[262,17],"./amplify-icon-button.entry.js":[263,18],"./amplify-icon.entry.js":[264,4],"./amplify-link.entry.js":[265,19],"./amplify-nav_2.entry.js":[266,20],"./amplify-radio-button_2.entry.js":[267,21],"./amplify-select-mfa-type.entry.js":[268,22],"./amplify-sign-in-button.entry.js":[269,5],"./amplify-tooltip.entry.js":[270,23]};function r(e){if(!n.o(a,e))return Promise.resolve().then((function(){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}));var t=a[e],r=t[0];return n.e(t[1]).then((function(){return n(r)}))}r.keys=function(){return Object.keys(a)},r.id=245,e.exports=r},246:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),o=n(34),i=n.n(o),l=(n(166),n(167),n(15)),c=n(301),s=n(152),u=n(128),m=n.n(u),d=n(296),f=n(144),p=n(57),y=n.n(p),g=n(129),h=n(80),E=n(44),b=n(127),w=function e(t,n,a){return new Promise((function(r,o){return t().then(r).catch((function(i){if(3===a)return o(i);var l=2*(n||500),c=(a||0)+1;console.log("Retry n. ".concat(c," in ").concat(l/1e3,"s...")),setTimeout((function(){return e(t,l,c).then(r).catch(o)}),l)}))}))},v=function(e){return null===e||function(e){return"undefined"===typeof e}(e)||(Array.isArray(e)?0===e.length:"string"===typeof e&&""===e.trim())},j=window.rekognitionSettings||{},k=j.region||"eu-west-1";h.default.configure({Auth:{identityPoolId:j.cognitoIdentityPool,region:k,mandatorySignIn:!0,userPoolId:j.cognitoUserPoolId,userPoolWebClientId:j.cognitoUserPoolClientId},API:{endpoints:[{name:"apiGateway",endpoint:j.apiGateway,region:k,custom_header:function(){var e=Object(g.a)(y.a.mark((function e(){var t,n;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.a.currentSession();case 2:return t=e.sent,n=t.getIdToken().getJwtToken(),e.abrupt("return",{Authorization:"Bearer ".concat(n)});case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}]}});var O=function(e,t,n){return w((function(){return b.a[t||"get"]("apiGateway",e,{body:n||void 0,headers:{"Content-Type":"application/json"}})}))},S={addUser:e=>O("/faces/index","post",{image:e.image,fullName:e.fullName}),processImage:e=>O("/process","post",{image:e})},x=function(e){var t=window.location.href;return e.show?r.a.createElement(d.a,null,r.a.createElement(f.a,{md:12},r.a.createElement("br",null),r.a.createElement("strong",null,"Please allow required permissions to continue"),"When prompted, you need to click ",r.a.createElement("i",null,"Allow")," to use the application with your webcamera.",r.a.createElement("br",null),"If you don't see the dialog, try"," ",r.a.createElement("a",{href:t},"opening the application")," in a new incognito window, or review your webcam settings on your browser.")):""},C=n(304),I=function(e){var t=e.type,n=e.size;n=n||"16";var a=function(e){var t=e.children;return r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 ".concat(n," ").concat(n),focusable:"false","aria-hidden":"true",width:n,height:n},t)};return"fail"===t?r.a.createElement(a,{size:n},r.a.createElement("circle",{className:"stroke-linejoin-round",cx:"8",cy:"8",r:"7",stroke:"#d13212",fill:"none",strokeWidth:"2px"}),r.a.createElement("path",{d:"M10.828 5.172l-5.656 5.656M10.828 10.828L5.172 5.172",stroke:"#d13212",fill:"none",strokeWidth:"2px"})):"success"===t?r.a.createElement(a,null,r.a.createElement("circle",{className:"stroke-linejoin-round",cx:"8",cy:"8",r:"7",stroke:"#1d8102",fill:"none",strokeWidth:"2px"}),r.a.createElement("path",{className:"stroke-linecap-square",d:"M5 8l2 2 3.521-3.521",stroke:"#1d8102",fill:"none",strokeWidth:"2px"})):""},A=function(e){var t=e.testResults;return r.a.createElement("div",{className:"tests-container"},t.map((function(e,t){return r.a.createElement(C.a,{style:{marginTop:"20px",textAlign:"left"},key:t},r.a.createElement(C.a.Header,null,r.a.createElement(I,{type:e.Success?"success":"fail"}),e.TestName),r.a.createElement(C.a.Body,null,r.a.createElement(C.a.Text,null,e.Details)))})))},T=n(303),N=n(302),P=n(297),U=function(e){var t=e.enabled,n=e.onClick,o=Object(a.useState)(!1),i=Object(l.a)(o,2),c=i[0],s=i[1];return r.a.createElement(P.a,{variant:c?"danger":"success",onClick:function(e){s(!c),n(e)},disabled:!t,size:"sm"},c?"Stop":"Start"," Rekognition Engine")},R=(n(236),n(299)),_=n(298),F=n(300),B=function(e){var t=e.onSave,n=Object(a.useState)("initial"),o=Object(l.a)(n,2),i=o[0],c=o[1],s=Object(a.useState)(""),u=Object(l.a)(s,2),m=u[0],d=u[1],f=Object(a.useState)(void 0),p=Object(l.a)(f,2),y=p[0],g=p[1],h=Object(a.useState)(!1),E=Object(l.a)(h,2),b=E[0],w=E[1],j=Object(a.useState)(!1),k=Object(l.a)(j,2),O=k[0],S=k[1],x=!v(y),C=!v(m),I=x&&C,A=function(e){w(!b),e&&(c("initial"),d(""),g(void 0))},T=function(e){return O?e?{isValid:!0}:{isInvalid:!0}:{}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(P.a,{onClick:function(){return A(!0)},size:"sm"},"Add a new user"),r.a.createElement(R.a,{show:b,onHide:A},r.a.createElement(R.a.Header,{closeButton:!0},r.a.createElement(R.a.Title,null,"Add a new user")),r.a.createElement(R.a.Body,null,r.a.createElement("p",null,"By uploading a picture and associating it with a name, Amazon Rekognition can recognize that person."),r.a.createElement("hr",null),r.a.createElement(_.a,{variant:"warning",style:{display:"saving"===i?"block":"none"}},"Please wait"),r.a.createElement(_.a,{variant:"danger",style:{display:"error"===i?"block":"none"}},"An error happened. Retry."),r.a.createElement(_.a,{variant:"success",style:{display:"saved"===i?"block":"none"}},"The user has been added."),r.a.createElement("form",{style:{display:"initial"===i?"block":"none"}},r.a.createElement(F.a.Group,{controlId:"fullName"},r.a.createElement(F.a.Label,null,"Full Name"),r.a.createElement(F.a.Control,Object.assign({type:"text",placeholder:"Full Name e.g. Jane Doe",value:m,onChange:function(e){return d(e.target.value)}},T(C)))),r.a.createElement(F.a.Group,{controlId:"image"},r.a.createElement(F.a.Label,null,"User Image"),r.a.createElement(F.a.Control,Object.assign({type:"file",onChange:function(e){return function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(){return g(t.result.split(",")[1])},t.onerror=function(){return c("error")}}(e.target.files[0])}},T(x)))))),r.a.createElement(R.a.Footer,null,r.a.createElement(P.a,{onClick:function(e){S(!0),I&&(c("saving"),e.preventDefault(),t({fullName:m,image:y}).then((function(){return c("saved")})).catch((function(){return c("error")})))},variant:"primary",type:"submit",disabled:!m||!y||"initial"!==i,show:"false"},"Add User"),r.a.createElement(P.a,{onClick:A},"Close"))))},z=function(e){var t=e.addUser,n=e.readyToStream,o=e.signedIn,i=e.toggleRekognition,c=Object(a.useState)(null),s=Object(l.a)(c,2),u=s[0],m=s[1],d=Object(a.useState)(void 0),f=Object(l.a)(d,2),p=f[0],y=f[1];return Object(a.useEffect)((function(){o&&w((function(){return E.a.currentAuthenticatedUser()})).then((function(e){return y(e.username)})).catch(m)}),[o]),r.a.createElement(T.a,{bg:"dark",expand:"lg"},r.a.createElement(T.a.Brand,null,r.a.createElement("div",{className:"logo"},"TY52 Test App")),r.a.createElement(T.a.Toggle,null),(p||u)&&r.a.createElement(T.a.Collapse,{className:"justify-content-end"},r.a.createElement(N.a,null,u&&r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"auth-error"},"Authentication error: ",u),r.a.createElement(P.a,{variant:"link",className:"headerLink",onClick:function(){return window.location.reload()}},"Retry")),p&&r.a.createElement(r.a.Fragment,null,r.a.createElement(U,{onClick:i,enabled:n}),r.a.createElement(B,{onSave:t})))))},W=function(e){return e.show?r.a.createElement(d.a,null,r.a.createElement(_.a,{variant:"danger"},"There is an issue with your settings configuration. If you are running the front-end code from your local machine, you may need to follow"," ",r.a.createElement("a",{href:"https://rajrajhans.com/",rel:"noopener noreferrer",target:"_blank"},"this guide"),".")):""},D=function(){var e=Object(a.useState)(void 0),t=Object(l.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(!1),u=Object(l.a)(i,2),p=u[0],y=u[1],g=Object(a.useState)([]),h=Object(l.a)(g,2),E=h[0],b=h[1],w=Object(a.useRef)(!1),v=Object(a.useRef)(void 0);Object(a.useEffect)((function(){return Object(s.a)((function(e){return o(e)}))}),[]);var j="signedin"===n;return r.a.createElement("div",{className:"App"},r.a.createElement(z,{addUser:function(e){return S.addUser(e)},readyToStream:p,signedIn:j,toggleRekognition:function(){w.current=!w.current,w.current?function e(){var t=v.current.getScreenshot().split(",")[1];S.processImage(t).then((function(t){t&&b(t),w.current?setTimeout(e,300):b([])}))}():b([])}}),j?r.a.createElement(r.a.Fragment,null,r.a.createElement(W,{show:!window.rekognitionSettings}),r.a.createElement(x,{show:!p}),r.a.createElement(d.a,null,r.a.createElement(f.a,{md:8,sm:6},r.a.createElement(m.a,{ref:function(e){v.current=e;!function e(){v.current&&v.current.state&&v.current.state.hasUserMedia?y(!0):setTimeout(e,250)}()},screenshotFormat:"image/jpeg",videoConstraints:{width:1280,height:640,facingMode:"user"},style:{width:"100%",marginTop:"10px"}})),r.a.createElement(f.a,{md:4,sm:6},r.a.createElement(A,{testResults:E})))):r.a.createElement("div",{className:"amplify-auth-container"},r.a.createElement(c.a,{usernameAlias:"email"},r.a.createElement(c.b,{slot:"sign-in",usernameAlias:"email",headerText:"Sign In to Anti Cheat System Demo",formFields:[{type:"email",label:"Username",placeholder:"Enter your username",required:!0,inputProps:{autoComplete:"off"}},{type:"password",label:"Password",placeholder:"Enter your password",required:!0,inputProps:{autoComplete:"off"}}]},r.a.createElement("div",{slot:"secondary-footer-content"})))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(D,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[161,2,3]]]);
//# sourceMappingURL=main.28cf5ca1.chunk.js.map